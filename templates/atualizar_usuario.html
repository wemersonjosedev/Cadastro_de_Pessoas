{% extends 'base.html' %}
{% block conteudo %}
<h2 class="text-center my-4">Atualizar Usuário</h2>
<hr>

{%- for mensagem in get_flashed_messages() %}
    <div class="alert alert-danger">
       {{mensagem}}
    </div>
{%- endfor %}

<form action="{{ url_for('atualizar_usuario', id=usuario.id) }}" method="POST" class="form-control" id="form-usuario" enctype="multipart/form-data">
    <div class="col-md-1">
        <div class="foto-container">
          <label for="foto-aluno" class="foto-upload">
            {% if usuario.foto %}
            <img src="{{ url_for('static', filename='uploads/fotos/' + usuario.foto) }}" alt="Foto 3x4 Usuário" id="foto-preview-aluno" height="150">
            {% else %}
                <img src="https://via.placeholder.com/120x150" alt="Foto 3x4 Usuário" id="foto-preview-aluno">
            {% endif %}
            <input type="file" id="foto-aluno" name="foto-aluno" accept="image/*" onchange="previewImage(this, 'foto-preview-aluno')">
          </label>
          <p class="text-center">Foto Usuário</p>
        </div>
    </div>

    <div class="form-group col-md-6">
        <label for="cpf">CPF:</label>
        <input class="form-control" type="text" name="cpf" id="cpf" value="{{ usuario.cpf }}" maxlength="15" required aria-required="true" aria-describedby="cpf-error">
        <div class="error-message" id="cpf-error"></div>
    </div>
    
    <label for="nome">Nome:</label>
    <input class="form-control" type="text" name="nome" id="nome" value="{{ usuario.nome }}" required aria-required="true" aria-describedby="nome-error">
    <div class="error-message" id="nome-error"></div>

    <label for="nome_mae">Nome da Mãe:</label>
    <input class="form-control" type="text" name="nome_mae" id="nome_mae" value="{{ usuario.nome_mae }}" required aria-required="true" aria-describedby="nome_mae-error">
    <div class="error-message" id="nome_mae-error"></div>

    <div class="form-group col-md-4 required">
        <label for="dn">Data de Nascimento:</label>
        <input type="date" class="form-control" id="dn" name="dn" value="{{ usuario.dn }}" required aria-required="true" aria-describedby="dn-error">
        <div class="error-message" id="dn-error"></div>
    </div>
     
    <div class="row">
        <div class="form-group col-md-6">
            <label for="rg">RG:</label>
            <input class="form-control" type="text" name="rg" id="rg" value="{{ usuario.rg }}" maxlength="20" required aria-required="true" aria-describedby="rg-error">
            <div class="error-message" id="rg-error"></div>
        </div>
    </div>
    <div class="text-center">
        <button type="submit" class="btn btn-success mt-3" id="btn-atualizar">Atualizar</button>
    </div>  
</form>
{% endblock %}